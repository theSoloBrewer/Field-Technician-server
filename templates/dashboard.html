{% extends "base.html" %}
{% block head %}
{{ super() }}
<script src="{{ url_for('static', filename='js/pagination.js')}}"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='style/pagination.css') }}" type="text/css" >
{% endblock %}
{% block body_html %}
{{ super() }}
<div class="container mx-auto">

	<div class="d-flex flex-row p-2">
		<div class="card border-info">
			<div class="card-header">Current Open Projects</div>
			<div class="card-body text-info" id="currentProjects">
			<table class="table">
				<thead>
					<tr>
						<th scope="col">#</th>
						<th scope="col">Name</th>
						<th scope="col">Code</th>
						<th scope="col">Status</th>
					</tr>
				</thead>
				<tbody id="currentTable">

				</tbody>
			</table>
		</div>
		<script>
		$('#currentProjects').pagination({
			dataSource: function(done){
				var result = [];
				var pro = [];
				$.get('/api/project', function(data) {
					proArr = $.each(data.projects, function(index, value){
						pro[index] = value;
						result = pro;
					});
					console.log(result);
					done(result);
				});
			},
			locator: 'projects',
			pageSize: 2,
			callback: function(data, pagination) {
				// template method of yourself
				var html;
				$.each(data, function(index, value){
					var statusDict = {0:"Booked", 1:"Scheduled",2:"In-Progess",3:"Complete"};
						html += "<tr>\
							<th scope='row'></th>\
							<td>" + value['name'] + "</td>\
							<td>" + value['code'] + "</td>\
							<td>" + statusDict[value['status']] + "</td>\
						<tr>"
					})
				$("#currentTable").html(html);
			}
		})
		
		</script>
	</div>

</div>
{% endblock %}